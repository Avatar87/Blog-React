<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ДЗ1</title>
    <script src="jquery-3.3.1.js"></script>
    <script type="text/javascript">
    function loop(times = 0, callback = null) {
        const txt = $("<h1></h1>").text("Task 1");
        $("body").append(txt);
        for (let i = 0; i < times; i++) {
            if (typeof callback == 'function') {
                callback();
            } else {
                const txt1 = $("<p></p>").text("callback is not a function!");
                $("body").append(txt1);
                break;
            }
        }
    }

    function calculateArea(height, width) {
        const txt = $("<h1></h1>").text("Task 2");
        $("body").append(txt);
        const params = height.toString() + 'cm ' + width.toString() + 'cm';
        const calcarea = height * width;
        class Rectangle {
            constructor(area, figure, input) {
                this.area = calcarea + 'cm';
                this.figure = 'rectangle';
                this.input = params;
            }
        }
        let rectangle = new Rectangle;

        const txt1 = $("<p></p>").html('area: ' + rectangle.area + '<br/>' + 'figure: ' + rectangle.figure + '<br/>' +
            'input: ' + rectangle.input);
        $("body").append(txt1);
    }

    function classes() {
        const txt = $("<h1></h1>").text("Task 3");
        $("body").append(txt);
        class Human {
            constructor(name, age, dateOfBirth) {
                this.name = name;
                this.age = age;
                this.dateOfBirth = dateOfBirth;
            }
            displayInfo() {
                const txt1 = $("<p></p>").html(this.name + '&nbsp;' + this.age + '&nbsp;' + this.dateOfBirth.toString());
                $("body").append(txt1);
                return txt1;
            }
        }
        let gosha = new Human('gosha', 23, '14-02-1995');
        gosha.displayInfo();

        class Employee extends Human {
            constructor(name, age, dateOfBirth, salary, department) {
                super(name, age, dateOfBirth);
                this.salary = salary;
                this.department = department;
            }
            displayInfo() {
                const txt2 = super.displayInfo().append('&nbsp;' + this.salary).append('&nbsp;' + this.department);
                $("body").append(txt2);
                return txt2;
            }
        }
        let masha = new Employee('masha', 25, '02-04-1993', 40000, 'webdev');
        masha.displayInfo();

        class Manager extends Employee {
            constructor(name, age, dateOfBirth, salary, department, employees) {
                super(name, age, dateOfBirth, salary, department);
                this.employees = employees;
            }
            displayInfo() {
                const txt3 = super.displayInfo().append('&nbsp; Сотрудники: ' + this.employees);
                $("body").append(txt3);
                return txt3;
            }
            delete(name) {
                this.employees = this.employees.filter(val => val !== name);
            }
            add(name) {
                this.employees.push(name);
            }
        }
        let dima = new Manager('dima', 30, '02-10-1987', 50000, 'webdev', [masha.name, gosha.name]);

        //dima.delete('masha');
        //dima.add('pasha');
        dima.displayInfo();

        class Developer extends Employee {
            constructor(name, age, dateOfBirth, salary, department, manager) {
                super(name, age, dateOfBirth, salary, department);
                this.manager = manager;
            }
            displayInfo() {
                const txt4 = super.displayInfo().append('&nbsp; Менеджер: ' + this.manager);
                $("body").append(txt4);
            }
            changemanager(name) {
                this.manager = name;
            }

        }
        let vasya = new Developer('vasya', 31, '02-11-1986', 60000, 'webdev', dima.name);
        //vasya.changemanager('vova');
        vasya.displayInfo();
    }

    function process() {
        function* gen() {
            let fio = yield prompt('ФИО');
            let email = yield prompt('email');
            let tel = yield prompt('Контактный телефон');
        }
        let generator = gen();

        const contfio = $("#fio").val();
        const contemail = $("#email").val();
        const conttel = $("#tel").val();
        const inputfio = generator.next().value;
        const inputmail = generator.next(contfio).value;
        const inputtel = generator.next(contemail).value;
        generator.next(conttel).done;

        class Form {
            constructor(fio, email, tel) {
                this.fio = fio;
                this.email = email;
                this.tel = tel;
            }
            displaydata() {
                const data = 'Имя:' + this.fio + "&nbsp;" + 'Email:' + this.email + "&nbsp;" + 'Телефон:' + this.tel + '<br>';
                $("#content").append(data);
            }
        }
        let form1 = new Form(inputfio, inputmail, inputtel);
        console.log(form1);
        form1.displaydata();
    }


    function form() {
        const txt = $("<h1></h1>").text("Task 4");
        $("body").append(txt);
        /* Второй вариант задания через форму:
        $("body").append($("<label for='fio'></label>").html("Контактное лицо (ФИО)" + "&nbsp;"));
        $("body").append($("<input id='fio' style='width: 400px' name='fio'>" + "<br><br>"));
        $("body").append($("<label for='email'></label>").html("Email адрес" + "&nbsp;"));
        $("body").append($("<input id='email'  style='width: 400px' name='email' >" + "<br><br>"));
        $("body").append($("<label for='tel'></label>").html("Контактный телефон" + "&nbsp;"));
        $("body").append($("<input id='tel' style='width: 400px' name='tel'>" + "<br><br>"));
        */
        $("body").append($("<input type='submit' name='reg' value='Ввести данные' onclick='process()'>" + "<br>"));
        $("body").append($("<div id = 'content'></div>"));
    }


    function promises() {
        const txt = $("<h1></h1>").text("Task 5");
        $("body").append(txt);
        let arr = [];
        for (let i = 1; i <= 11; i++) {
            let p = new Promise(function(resolve, reject) {
                resolve($.get("https://jsonplaceholder.typicode.com/users/" + i, function(data) {
                    arr.push(data);
                }));
            })
        }
        console.log(arr);
    }



    $(document).ready(function() {
        loop(3, () => {
            const txt2 = $("<p></p>").text('Hello World ' + 'callback is ' + typeof loop.arguments[1]);
            $("body").append(txt2);
        })

        calculateArea(5, 15);

        classes();

        form();

        promises();
    });
    </script>
</head>

<body style="text-align: center;">
</body>

</html>